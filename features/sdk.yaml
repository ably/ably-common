%YAML 1.2
---
Authentication Options:
  Callback:
    .specification: [RSA4a, RSA4, TO3j5, AO2b]
    .synopsis: |
      Service `Auth#requestToken` calls by invoking a callback (`authCallback`).
  Key:
    .specification: [RSA11, TO3j1, AO2a]
    .synopsis: |
      Authenticate using a full Ably key string, as obtained from the dashboard,
      featuring a key name and key secret.
  Query Time:
    .specification: [TO3j10, RSA9d, RSA10k, AO2g]
    .synopsis: |
      Query the Ably system for the current time when making token requests.
  Token Details:
    .specification: [RSA4a, RSA4, TO3j3]
  Token Request:
    .specification: [TO3j2]
  Token String:
    .specification: [RSA4a, RSA4, TO3j2]
  URL:
    .specification:
      [RSA8c, TO3j6, TO3j7, TO3j8, TO3j9, AO2c, AO2d, AO2e, AO2f, RSA4]
    .synopsis: |
      Service `Auth#requestToken` calls by querying a provided URL (`authURL`) to obtain a token request,
      or the token itself. Supports specification of other HTTP request properties including
      `authMethod`, `authHeaders` and `authParams`.
  Use Token Authentication:
    .specification: [RSA4, RSA14, TO3j4]
    .synopsis: |
      Specifies that Token Auth, not Basic Auth, must be used.
Push Notifications:
  Activation:
    .specification: [RSH2, RSH3, RSH4, RSH5, RSH6, RSH7, RSH8]
  Administration:
    .documentation: https://ably.com/docs/rest/push#push-admin
    .specification: RSH1
    Channel Subscription:
      .specification: RSH1c
      List:
        .specification: RSH1c1
      List Channels:
        .specification: RSH1c2
      Remove:
        .specification: [RSH1c4, RSH1c5]
      Save:
        .specification: RSH1c3
    Device Registration:
      .specification: RSH1b
      Get:
        .specification: RSH1b1
      List:
        .specification: RSH1b2
      Remove:
        .specification: [RSH1b4, RSH1b4]
      Save:
        .specification: RSH1b3
    Publish:
      .documentation:
        - https://ably.com/docs/rest/push#publish
        - https://ably.com/docs/rest-api#push-publish
        - https://ably.com/docs/general/push/publish#direct-publishing
      .specification: RSH1a
      .synopsis: |
        Deliver a push notification to devices, addressing recipient(s):
        - registered to Ably by device ID
        - by their associated client ID
        - directly using the underlying notifications service (FCM, APNs, etc.), thus bypassing registrations to Ably altogether
Realtime:
  .synopsis: |
    Additional functionality offered by Ably client instances that offer Realtime connectivity.

  Channel:
    Subscription:
      Deltas:
        .specification: [RTL18, RTL19, RTL20, PC3, TM2i]
        .synopsis: |
          Support for VCDiff-encoded delta streams.
          SDKs may choose to offer this only if a plugin is supplied via client options
          (optional functionality).

  # TODO Work out how to express what's going on here. This set of Options for Realtime
  # inherit the set of Options for REST.
  # TODO (DF1a) connectionStateTtl [ably-java]
  # TODO (DF1b) realtimeRequestTimeout [ably-java]
  # TODO asyncHttpThreadpoolSize [ably-java]
  # TODO pushFullWait [ably-java]
  # TODO localStorage [ably-java]
  Options:
    Channel Retry Timeout:
      .specification: [RTL13b, TO3l7]
      .synopsis: |
        Channel reattachement is attempted after this amount of time in the `SUSPENDED` connection state,
        following a server-initiated channel detach, if the connection state is `CONNECTED`.
    Connection Recovery String:
      .specification: [RTC1c, TO3i]
      .synopsis: |
        Attempt to recover/inherit the state of a previous connection.
    Disable Automatic Connection:
      .specification: [RTC1b, RTN3, RTL4b1, TO3e]
      .synopsis: |
        Disable the automatic initiation of a connection when a client instance is instantiated.
    Disable Message Echoes:
      .specification: [RTC1a, RTL7f, TO3h]
      .synopsis: |
        Suppress messages originating from this connection from being echoed back on the same connection.
    Disable Message Queuing:
      .specification: [RTL6c2, RTP16, TO3g]
      .synopsis: |
        Suppress queuing of messages when connection state antipates imminent connection.
    Disconnected Retry Timeout:
      .specification: [TO3l1, RTN14d]
      .synopsis: |
        Reconnection is attempted after this amount of time in the `DISCONNECTED` connection state.
    Host:
      .specification: [RTC1d, TO3k3]
      .synopsis: |
        Override the Realtime endpoint, for development environments only.
    Suspended Retry Timeout:
      .specification: [TO3l2, RTN14e]
      .synopsis: |
        Reconnection is attempted after this amount of time in the `SUSPENDED` connection state.
    Transport Parameters:
      .specification: RTC1f
      .synopsis: Sent in query string when initiating the Realtime connection.
  Presence:
    Subscription:
      .specification: [RTP6, RTP7]
REST:
  .synopsis: |
    Functionality offered by all Ably client instances (REST and Realtime).
  Agent Identifier:
    .specification: RSC7d
    .synopsis: |
      Sends an `Ably-Agent` HTTP header for REST and Realtime Websocket connections,
      identifying the library version,
      as well as relevant information describing any underlying layers and the client platform.
  Authentication:
    .specification: RSC5
    Authorize:
      .specification: RSA10
    Create Token Request:
      .specification: RSA9
    Get Client Identifier:
      .specification: [RSA7, RSC17, RSA12]
    Request Token:
      .specification: RSA8e
  Channel:
    .specification: [RSN1, RTC3]
    Existence Check:
      .specification: [RSN2, RTS2]
      .synopsis: Discover if a channel exists with a given name.
    Get:
      .specification: [RSN3a, RTS3a]
      .synopsis: Get or create a channel instance with a given name.
    History:
      .documentation:
        - https://ably.com/docs/rest/history
        - https://ably.com/docs/core-features/history
      .specification: RSL2
    Iterate:
      .specification: [RSN2, RTS2]
      .synopsis: Enumerate local channel instances.
    Name:
      # to be formally specified: https://github.com/ably/docs/issues/1416
      .synopsis: Read-only property containing the channel name.
    Presence:
      .specification: [RSL3, RSP1, RSP2]
      History:
        .documentation: https://ably.com/docs/rest/presence#presence-history
        .specification: RSP4
      Member List:
        .documentation: https://ably.com/docs/rest/presence#member-list
        .specification: RSP3
    Release:
      .specification: [RSN4, RTS4]
      .synopsis: Free up resources consumed by a local channel instance.
  Create:
    .specification: RSC1
    with API Key:
    with Client Options:
    with Token String:
  Device:
  Options:
    .synopsis: |
      Options offered by all Ably client instances (REST and Realtime).
    Client Identifier:
      .specification: [RSC17, RSA7, RSA15, RTN2d, TO3a]
      .synopsis: |
        The id of the client represented by the client instance create using these options.
    Default Token Parameters:
      .specification: [TO3j11, RSA7a4]
      .synopsis: Overrides client library defaults for `TokenParams`.
    Disable Binary Protocol:
      .specification: [RSC8b, TO3f]
      .synopsis: |
        Use JSON protocol, overriding the default MessagePack binary protocol.
        MessagePack is the default for runtime environments that have a suitable level of support
        for binary data.
    Disable Idempotent Publishing:
      .specification: [RSL1k, RTL6a1, TO3n]
      .synopsis: |
        Overrides the client library default, from version 1.2 of the features specification,
        that makes REST publish operations idempotent.
    Disable Transport Layer Security:
      .specification: [TO3d, RSC18]
      .synopsis: Disable TLS, for development environments only.
    Enable Request Identifiers:
      .specification: [RSC7c, TO3p]
      .synopsis: |
        Adds a query string parameter, based on a source of randomnes, to all REST requests.
    Environment:
      .specification: [RSC11b, RSC15g, RTC1e, RTN17a, TO3k1]
      .synopsis: |
        Override environment for REST and Realtime connections, for example to `sandbox`.
        For development environments only.
    Fallback Hosts:
      .specification: [RSC15b2, RSC15g, RTN17b2, TO3k6]
      .synopsis: |
        Override the default fallback hosts, for REST and Realtime connections.
        Defaults are autogenerated from `environment` so this option should not be needed for
        anything other than development environments.
    Fallback Retry Timeout:
      .specification: [TO3l10, RSC15f]
    Host:
      .specification: [RSC11, RSC12, RSC15b1, RSC15e, RSC15f, TO3k2]
      .synopsis: |
        Override the REST endpoint, for development environments only.
    HTTP Connection Open Timeout:
      .specification: TO3l3
    HTTP Request Timeout:
      .specification: TO3l4
    Inject Agents:
      .specification: RSC7d6
      .synopsis: |
        For use only by other Ably-authored SDKs, on a need-to-have basis.
    Log Handling:
      .specification: [TO3b, TO3c]
      .synopsis: |
        What level of log messages to generate and where to send them.
        Typically a `logHandler` and a `logLevel`, but some logging systems may express
        this differently for idiomatic reasons that make sense for the language, framework
        or runtime platform.
    Maximum Frame Size:
      .specification: [TO3l9, CD2d]
      .synopsis: |
        Override the default for the maximum size of a single REST POST body or Realtime Websocket frame.
    Maximum HTTP Retry Count:
      .specification: [TO3l5, RSC15a]
    Maximum HTTP Retry Duration:
      .specification: TO3l6
    Maximum Message Size:
      .specification: [TO3l8, RSL1i, RTL6d1, CD2c]
      .synopsis: |
        The maximum size of messages that may be published in one go.
    Plugins:
      .specification: [PC1, PC2, TO3o]
      .synopsis: |
        Defines a mechanism that SDKs may use to allow users to specify optional functionality
        at runtime.
    Port:
      .specification: [TO3k4, RSC15b1, RTN17b1]
      .synopsis: |
        Overrides the TCP port to be used for insecure connections, where TLS has been disabled,
        for development environments only.
    Proxy:
      .synopsis: |
        Support for specify HTTP proxy server.
    TLS Port:
      .specification: [TO3k5, RSC15b1, RTN17b1]
      .synopsis: |
        Overrides the TCP port to be used for secure connections, for development environments only.
