%YAML 1.2
---
Authentication Options:
  Callback:
    .specification: [RSA4a, RSA4, TO3j5, AO2b]
    .synopsis: |
      Service `Auth#requestToken` calls by invoking a callback (`authCallback`).
  Key:
    .specification: [RSA11, TO3j1, AO2a]
    .synopsis: |
      Authenticate using a full Ably key string, as obtained from the dashboard,
      featuring a key name and key secret.
  Query Time:
    .specification: [TO3j10, RSA9d, RSA10k, AO2g]
    .synopsis: |
      Query the Ably system for the current time when making token requests.
  Token Details:
    .specification: [RSA4a, RSA4, TO3j3]
  Token Request:
    .specification: [TO3j2]
  Token String:
    .specification: [RSA4a, RSA4, TO3j2]
  URL:
    .specification:
      [RSA8c, TO3j6, TO3j7, TO3j8, TO3j9, AO2c, AO2d, AO2e, AO2f, RSA4]
    .synopsis: |
      Service `Auth#requestToken` calls by querying a provided URL (`authURL`) to obtain a token request,
      or the token itself. Supports specification of other HTTP request properties including
      `authMethod`, `authHeaders` and `authParams`.
  Use Token Authentication:
    .specification: [RSA4, RSA14, TO3j4]
    .synopsis: |
      Specifies that Token Auth, not Basic Auth, must be used.
Realtime Client:
  .inherit: [REST Client]
  .synopsis: |
    Additional functionality offered by Ably client instances that offer Realtime connectivity.

  # TODO Work out how to express what's going on here. This set of Options for the Realtime
  # Client inherit the set of Options for the REST Client. I've not used an `.inherit` node
  # here to indicate that because we already have the Realtime Client node inheriting from
  # the REST Client node.
  Options:
    Channel Retry Timeout:
      .specification: [RTL13b, TO3l7]
      .synopsis: |
        Channel reattachement is attempted after this amount of time in the `SUSPENDED` connection state,
        following a server-initiated channel detach, if the connection state is `CONNECTED`.
    Connection Recovery String:
      .specification: [RTC1c, TO3i]
      .synopsis: |
        Attempt to recover/inherit the state of a previous connection.
    Disable Automatic Connection:
      .specification: [RTC1b, RTN3, RTL4b1, TO3e]
      .synopsis: |
        Disable the automatic initiation of a connection when a client instance is instantiated.
    Disable Message Echoes:
      .specification: [RTC1a, RTL7f, TO3h]
      .synopsis: |
        Suppress messages originating from this connection from being echoed back on the same connection.
    Disable Message Queuing:
      .specification: [RTL6c2, RTP16, TO3g]
      .synopsis: |
        Suppress queuing of messages when connection state antipates imminent connection.
    Disconnected Retry Timeout:
      .specification: [RO3l1, RTN14d]
      .synopsis: |
        Reconnection is attempted after this amount of time in the `DISCONNECTED` connection state.
    Fallback Retry Timeout:
      .specification: [TO3l10, RSC15f]
    Host:
      .specification: [RTC1d, TO3k3]
      .synopsis: |
        Override the Realtime endpoint, for development environments only.
    HTTP Connection Open Timeout:
      .specification: TO3l3
    HTTP Request Timeout:
      .specification: TO3l4
    Maximum Frame Size:
      .specification: [TO3l9, CD2d]
    Maximum HTTP Retry Count:
      .specification: [TO3l5, RSC15a]
    Maximum HTTP Retry Duration:
      .specification: TO3l6
    Maximum Message Size:
      .specification: [TO3l8, RSL1i, RTL6d1, CD2c]
      .synopsis: |
        The maximum size of messages that may be published in one go.
    Suspended Retry Timeout:
      .specification: [TO3l2, RTN14e]
      .synopsis: |
        Reconnection is attempted after this amount of time in the `SUSPENDED` connection state.
    Transport Parameters:
      .specification: RTC1f
      .synopsis: Sent in query string when initiating the Realtime connection.
  Presence:
    Subscription:
      .specification: [RTP6, RTP7]
REST Client:
  .synopsis: |
    Functionality offered by all Ably client instances (REST and Realtime).
  Authentication:
    .specification: RSC5
    Authorize:
      .specification: RSA10
    Create Token Request:
      .specification: RSA9
    Get Client Identifier:
      .specification: [RSA7, RSC17, RSA12]
    Request Token:
      .specification: RSA8e
  Channel:
    .specification: [RSN1, RTC3]
    existence check:
      .specification: [RSN2, RTS2]
      .synopsis: Discover if a channel exists with a given name.
    get:
      .specification: [RSN3a, RTS3a]
      .synopsis: Get or create a channel instance with a given name.
    get with Channel Options:
      .specification: [RSN3c, RTS3c]
      .synopsis: Soft-deprecated.
    iterate:
      .specification: [RSN2, RTS2]
      .synopsis: Enumerate local channel instances.
    Presence:
      Get Member List:
        .documentation: https://ably.com/docs/realtime/presence#member-list
      Retrieve Event History:
    release:
      .specification: [RSN4, RTS4]
      .synopsis: Free up resources consumed by a local channel instance.
  Create:
    .specification: RSC1
    with API Key:
    with Client Options:
    with Token String:
  Device:
  Options:
    .inherit: [Authentication Options]
    .synopsis: |
      Options offered by all Ably client instances (REST and Realtime).
    Client Identifier:
      .specification: [RSC17, RSA7, RSA15, RTN2d, TO3a]
      .synopsis: |
        The id of the client represented by the client instance create using these options.
    Default Token Parameters:
      .specification: [TO3j11, RSA7a4]
      .synopsis: Overrides client library defaults for `TokenParams`.
    Disable Transport Layer Security:
      .specification: [TO3d, RSC18]
      .synopsis: Disable TLS, for development environments only.
    Environment:
      .specification: [RSC11b, RSC15g, RTC1e, RTN17a, TO3k1]
      .synopsis: |
        Override environment for REST and Realtime connections, for example to `sandbox`.
        For development environments only.
    Host:
      .specification: [RSC11, RSC12, RSC15b1, RSC15e, RSC15f, TO3k2]
      .synopsis: |
        Override the REST endpoint, for development environments only.
    Log Handling:
      .specification: [TO3b, TO3c]
      .synopsis: |
        What level of log messages to generate and where to send them.
        Typically a `logHandler` and a `logLevel`, but some logging systems may express
        this differently for idiomatic reasons that make sense for the language, framework
        or runtime platform.
    Port:
      .specification: [TO3k4, RSC15b1, RTN17b1]
      .synopsis: |
        Overrides the TCP port to be used for insecure connections, where TLS has been disabled,
        for development environments only.
    TLS Port:
      .specification: [TO3k5, RSC15b1, RTN17b1]
      .synopsis: |
        Overrides the TCP port to be used for secure connections, for development environments only.
  Push Notifications:
    Activation:
      .specification: [RSH2, RSH3, RSH4, RSH5, RSH6, RSH7, RSH8]
    Administration:
      .documentation: https://ably.com/docs/rest/push#push-admin
      .specification: RSH1
      Channel Subscription:
        .specification: RSH1c
        List:
          .specification: RSH1c1
        List Channels:
          .specification: RSH1c2
        Remove:
          .specification: [RSH1c4, RSH1c5]
        Save:
          .specification: RSH1c3
      Device Registration:
        .specification: RSH1b
        Get:
          .specification: RSH1b1
        List:
          .specification: RSH1b2
        Remove:
          .specification: [RSH1b4, RSH1b4]
        Save:
          .specification: RSH1b3
      Publish:
        .documentation:
          - https://ably.com/docs/rest/push#publish
          - https://ably.com/docs/rest-api#push-publish
          - https://ably.com/docs/general/push/publish#direct-publishing
        .specification: RSH1a
        .synopsis: |
          Deliver a push notification to devices, addressing recipient(s):
          - registered to Ably by device ID
          - by their associated client ID
          - directly using the underlying notifications service (FCM, APNs, etc.), thus bypassing registrations to Ably altogether
