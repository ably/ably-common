%YAML 1.2
---
# TODO This codebase publishes two artifacts, ably-java and ably-android, which
# have different capabilities to one another. These are represented under the root
# `variants` node in this document, but how should they be carried through into the
# compliance tree?
common-version: 1.2.0
compliance:
  Client Instance Creation:
    .api:
      - io.ably.lib.realtime#AblyRealtime
      - io.ably.lib.rest#AblyRest
    With API Key:
      .api:
        constructor: [java.lang.String]
    With Client Options:
      .api:
        constructor: [io.ably.lib.types.ClientOptions]
    With Token String:
  Options:
    Agents:
      .api: $agents
    Authentication:
      .api: io.ably.lib.rest.Auth#AuthOptions
      Callback:
        .api: $authCallback
      Key:
        .api: $key
      Query Time:
        .api: $queryTime
      Token Details:
        .api: $tokenDetails
      Token String:
        .api: $token
      URL:
        .api:
          - $authUrl
          - $authMethod
          - $authHeaders
          - $authParams
      Use Token Authentication:
        .api: $useTokenAuth
    Binary Protocol:
      .api: $useBinaryProtocol
    Client Identifier:
      .api: $clientId
    Default Token Parameters:
      .api: $defaultTokenParams
    Environment:
      .api: $environment
    Fallback Hosts:
      .api: $fallbackHosts
    HTTP Connection Open Timeout:
      .api: $httpOpenTimeout
    Log Handling:
      .api:
        - $logLevel
        - $logHandler
    Port:
      .api: $port
    Proxy:
      .api: $proxy
    TLS Port:
      .api: $tlsPort
    Transport Layer Security:
      .api: $tls
  Push Notifications:
    .api: io.ably.lib.push#Push
    Activation:
      .api:
        - $activate
        - $deactivate
      .variants: Android
    Administration:
      .api: io.ably.lib.push.PushBase#Admin
      Publish:
        .api:
          - arguments:
              - io.ably.lib.types.Param[]
              - com.google.gson.JsonObject
            identifier: $publish
          - arguments:
              - io.ably.lib.types.Param[]
              - com.google.gson.JsonObject
              - io.ably.lib.realtime.CompletionListener
            identifier: $publishAsync
  Realtime:
    Options:
      .api: io.ably.lib.types#ClientOptions
      Automatic Connection:
        .api: $autoConnect
      Channel Retry Timeout:
        .api: $channelRetryTimeout
      Connection Recovery String:
        .api: $recover
      Host:
        .api: $realtimeHost
      Message Echoes:
        .api: $echoMessages
      Message Queuing:
        .api: $queueMessages
      Transport Parameters:
        .api: $transportParams
  REST:
    Options:
      .api: io.ably.lib.types#ClientOptions
      Fallback Retry Timeout:
        .api: $fallbackRetryTimeout
      Host:
        .api: $restHost
      HTTP Request Timeout:
        .api: $httpRequestTimeout
      Idempotent Publishing:
        .api: $idempotentRestPublishing
      Maximum HTTP Retry Count:
        .api: $httpMaxRetryCount
      Request Identifiers:
        .api: $addRequestIds
variants:
  Android:
    .synopsis: |
      Builds `aar` artifact(s) for use by applications running on the Android operating system.
  JRE:
    .synopsis: |
      Builds `jar` artifact(s) for use by applications running in a Java Runtime Environment (JRE).
